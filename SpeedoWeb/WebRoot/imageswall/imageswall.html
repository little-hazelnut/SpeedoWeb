<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>作品滑动照片墙 - 天喵TMIAO.COM</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" href="css/css.css" type="text/css" media="screen"/>
    </head>
    <style>
        a{
            color:#fff;
            text-decoration:none;
        }
        a:hover{
            text-decoration:underline;
        }
        span.reference{
            position:fixed;
            left:30px;
            bottom:0px;
            font-size:15px;
        }
        span.reference a{
            color:#aaa;
        }
        span.reference a:hover{
            color:#ddd;
            text-decoration:none;
        }
		
		#description{
			font-size:14px;
		}
		
		#content img{
			width:75px;
			height:75px;
		}

    </style>
    <body>
		<div class="infobar">
            <span id="description"></span>
            <span id="loading">Loading Image</span>
            <span class="reference">
                <a href="../index.jsp">天喵TMIAO - 上天喵，喵一喵</a>
            </span>
        </div>
        <div id="thumbsWrapper">
            <div id="content">
				<div id="imageswall-title">
					<h1 align="center">天喵说TMIAOSAY - 设计师作品墙</h1>
				</div>
                <img src="thumbs/1.jpg" alt="thumbs/1.jpg"  title="设计师	© 小榛"/>
                <img src="thumbs/2.jpg" alt="images/2.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/3.jpg" alt="images/3.jpg" title="设计师	© 小榛"/>
               <img src="thumbs/4.jpg"  alt="images/4.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/5.jpg" alt="images/5.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/6.jpg" alt="images/6.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/7.jpg" alt="images/7.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/8.jpg" alt="images/8.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/9.jpg" alt="images/9.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/10.jpg" alt="images/10.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/11.jpg" alt="images/11.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/12.jpg" alt="images/12.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/13.jpg" alt="images/13.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/14.jpg" alt="images/14.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/15.jpg" alt="images/15.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/16.jpg" alt="images/16.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/17.jpg" alt="images/17.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/18.jpg" alt="images/18.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/19.jpg" alt="images/19.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/20.jpg" alt="images/20.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/21.jpg" alt="images/21.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/22.jpg" alt="images/22.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/23.jpg" alt="images/23.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/24.jpg" alt="images/24.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/25.jpg" alt="images/25.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/26.jpg" alt="images/26.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/27.jpg" alt="images/27.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/28.jpg" alt="images/28.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/29.jpg" alt="images/29.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/30.jpg" alt="images/30.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/31.jpg" alt="images/31.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/32.jpg" alt="images/32.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/33.jpg" alt="images/33.jpg" title="设计师	© 小榛"/>
               <img src="thumbs/34.jpg" alt="images/34.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/35.jpg" alt="images/35.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/36.jpg" alt="images/36.jpg" title="设计师	© 小榛"/>
               <img src="thumbs/37.jpg" alt="images/37.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/38.jpg" alt="images/38.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/39.jpg" alt="images/39.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/40.jpg" alt="images/40.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/41.jpg" alt="images/41.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/42.jpg" alt="images/42.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/43.jpg" alt="images/43.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/44.jpg" alt="images/44.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/45.jpg" alt="images/45.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/46.jpg" alt="images/46.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/47.jpg" alt="images/47.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/48.jpg" alt="images/48.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/49.jpg" alt="images/49.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/50.jpg" alt="images/50.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/51.jpg" alt="images/51.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/52.jpg" alt="images/52.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/53.jpg" alt="images/53.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/54.jpg" alt="images/54.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/55.jpg" alt="images/55.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/56.jpg" alt="images/56.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/57.jpg" alt="images/57.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/58.jpg" alt="images/58.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/59.jpg" alt="images/59.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/60.jpg" alt="images/60.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/61.jpg" alt="images/61.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/62.jpg" alt="images/62.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/63.jpg" alt="images/63.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/64.jpg" alt="images/64.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/65.jpg" alt="images/65.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/66.jpg" alt="images/66.jpg" title="设计师	© 小榛"/>
                 <img src="thumbs/67.jpg" alt="images/67.jpg" title="设计师 © 小榛"/>
                <img src="thumbs/68.jpg" alt="images/68.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/69.jpg" alt="images/69.jpg" title="设计师	© 小榛"/>
               <img src="thumbs/70.jpg" alt="images/70.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/71.jpg" alt="images/71.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/72.jpg" alt="images/72.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/73.jpg" alt="images/73.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/74.jpg" alt="images/74.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/75.jpg" alt="images/75.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/76.jpg" alt="images/76.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/77.jpg" alt="images/77.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/78.jpg" alt="images/78.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/79.jpg" alt="images/79.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/80.jpg" alt="images/80.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/81.jpg" alt="images/81.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/82.jpg" alt="images/82.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/83.jpg" alt="images/83.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/84.jpg" alt="images/84.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/85.jpg" alt="images/85.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/86.jpg" alt="images/86.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/87.jpg" alt="images/87.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/88.jpg" alt="images/88.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/89.jpg" alt="images/89.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/90.jpg" alt="images/90.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/91.jpg" alt="images/91.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/92.jpg" alt="images/92.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/93.jpg" alt="images/93.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/94.jpg" alt="images/94.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/95.jpg" alt="images/95.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/96.jpg" alt="images/96.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/97.jpg" alt="images/97.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/98.jpg" alt="images/98.jpg" title="设计师	© 小榛"/>
                <img src="thumbs/99.jpg" alt="images/99.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/100.jpg" alt="images/100.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/101.jpg" alt="images/101.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/102.jpg" alt="images/102.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/103.jpg" alt="images/103.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/104.jpg" alt="images/104.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/105.jpg" alt="images/105.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/106.jpg" alt="images/106.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/107.jpg" alt="images/107.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/108.jpg" alt="images/108.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/109.jpg" alt="images/109.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/110.jpg" alt="images/110.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/111.jpg" alt="images/111.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/112.jpg" alt="images/112.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/113.jpg" alt="images/113.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/114.jpg" alt="images/114.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/115.jpg" alt="images/115.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/116.jpg" alt="images/116.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/117.jpg" alt="images/117.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/118.jpg" alt="images/118.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/119.jpg" alt="images/119.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/120.jpg" alt="images/120.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/121.jpg" alt="images/121.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/122.jpg" alt="images/122.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/123.jpg" alt="images/123.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/124.jpg" alt="images/124.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/125.jpg" alt="images/125.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/126.jpg" alt="images/126.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/127.jpg" alt="images/127.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/128.jpg" alt="images/128.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/129.jpg" alt="images/129.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/130.jpg" alt="images/130.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/131.jpg" alt="images/131.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/132.jpg" alt="images/132.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/133.jpg" alt="images/133.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/134.jpg" alt="images/134.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/135.jpg" alt="images/135.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/136.jpg" alt="images/136.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/137.jpg" alt="images/137.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/138.jpg" alt="images/138.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/139.jpg" alt="images/139.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/140.jpg" alt="images/140.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/141.jpg" alt="images/141.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/142.jpg" alt="images/142.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/143.jpg" alt="images/143.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/144.jpg" alt="images/144.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/145.jpg" alt="images/145.jpg" title="设计师	© 小榛"/>
				<img src="thumbs/146.jpg" alt="images/146.jpg" title="设计师	© 小榛"/>
                <div class="placeholder"></div>
            </div>
        </div>
        <div id="panel">
            <div id="wrapper">
                <a id="prev"></a>
                <a id="next"></a>
            </div>
        </div>
        <!-- The JavaScript -->
       <script type="text/javascript" src="jquary/jquery-1.4.2.min.js"></script>
        <script type="text/javascript">
            $(function() {
                /* this is the index of the last clicked picture */
                var current = -1;
                var totalpictures = $('#content img').size();
                /* speed to animate the panel and the thumbs wrapper */
                var speed 	= 500;
				
                /* show the content */
                $('#content').show();
				
                /*
                when the user resizes the browser window,
                the size of the picture being viewed is recalculated;
                 */
                $(window).bind('resize', function() {
                    var $picture = $('#wrapper').find('img');
                    resize($picture);
                });
               
                /*
                when hovering a thumb, animate it's opacity
                for a cool effect;
                when clicking on it, we load the corresponding large image;
                the source of the large image is stored as 
                the "alt" attribute of the thumb image
                 */
                $('#content > img').hover(function () {
                    var $this   = $(this);
                    $this.stop().animate({'opacity':'1.0'},200);
                },function () {
                    var $this   = $(this);
                    $this.stop().animate({'opacity':'0.4'},200);
                }).bind('click',function(){
                    var $this   = $(this);
                    
                    /* shows the loading icon */
                    $('#loading').show();
                    
                    $('<img/>').load(function(){
                        $('#loading').hide();
                        
                        if($('#wrapper').find('img').length) return;
                        current 	= $this.index();
                        var $theImage   = $(this);
                        /*
                        After it's loaded we hide the loading icon
                        and resize the image, given the window size;
                        then we append the image to the wrapper
                        */
                        
                        resize($theImage);

                        $('#wrapper').append($theImage);
                        /* make its opacity animate */
                        $theImage.fadeIn(800);
                        
                        /* and finally slide up the panel */
                        $('#panel').animate({'height':'100%'},speed,function(){
                            /*
                            if the picture has a description,
                            it's stored in the title attribute of the thumb;
                            show it if it's not empty
                             */
                            var title = $this.attr('title');
                            if(title != '') 
                                $('#description').html(title).show();
                            else 
                                $('#description').empty().hide();
                            
                            /*
                            if our picture is the first one,
                            don't show the "previous button"
                            for the slideshow navigation;
                            if our picture is the last one,
                            don't show the "next button"
                            for the slideshow navigation
                             */
                            if(current==0)
                                $('#prev').hide();
                            else
                                $('#prev').fadeIn();
                            if(current==parseInt(totalpictures-1))
                                $('#next').hide();
                            else
                                $('#next').fadeIn();
                            /*
                            we set the z-index and height of the thumbs wrapper 
                            to 0, because we want to slide it up afterwards,
                            when the user clicks the large image
                             */
                            $('#thumbsWrapper').css({'z-index':'0','height':'0px'});
                        });
                    }).attr('src', $this.attr('alt'));
                });

                /*
                when hovering a large image,
                we want to slide up the thumbs wrapper again,
                and reset the panel (like it was initially);
                this includes removing the large image element
                 */
                $('#wrapper > img').live('click',function(){
                    $this = $(this);
                    $('#description').empty().hide();
                    
                    $('#thumbsWrapper').css('z-index','10')
                    .stop()
                    .animate({'height':'100%'},speed,function(){
                        var $theWrapper = $(this);
                        $('#panel').css('height','0px');
                        $theWrapper.css('z-index','0');
                        /* 
                        remove the large image element
                        and the navigation buttons
                         */
                        $this.remove();
                        $('#prev').hide();
                        $('#next').hide();
                    });
                });

                /*
                when we are viewing a large image,
                if we navigate to the right/left we need to know
                which image is the corresponding neighbour.
                we know the index of the current picture (current),
                so we can easily get to the neighbour:
                 */
                $('#next').bind('click',function(){
                    var $this           = $(this);
                    var $nextimage 		= $('#content img:nth-child('+parseInt(current+2)+')');
                    navigate($nextimage,'right');
                });
                $('#prev').bind('click',function(){
                    var $this           = $(this);
                    var $previmage 		= $('#content img:nth-child('+parseInt(current)+')');
                    navigate($previmage,'left');
                });

                /*
                given the next or previous image to show,
                and the direction, it loads a new image in the panel.
                 */
                function navigate($nextimage,dir){
                    /*
                    if we are at the end/beginning
                    then there's no next/previous
                     */
                    if(dir=='left' && current==0)
                        return;
                    if(dir=='right' && current==parseInt(totalpictures-1))
                        return;
                    $('#loading').show();
                    $('<img/>').load(function(){
                        var $theImage = $(this);
                        $('#loading').hide();
                        $('#description').empty().fadeOut();
                         
                        $('#wrapper img').stop().fadeOut(500,function(){
                            var $this = $(this);
							
                            $this.remove();
                            resize($theImage);
                            
                            $('#wrapper').append($theImage.show());
                            $theImage.stop().fadeIn(800);

                            var title = $nextimage.attr('title');
                            if(title != ''){
                                $('#description').html(title+"&nbsp;&nbsp;<a href='../ShowPro?id=11' style='color:#FF73A1; '>&hearts;喜欢</a>").show();
                            }
                            else
                                $('#description').empty().hide();

                            if(current==0)
                                $('#prev').hide();
                            else
                                $('#prev').show();
                            if(current==parseInt(totalpictures-1))
                                $('#next').hide();
                            else
                                $('#next').show();
                        });
                        /*
                        increase or decrease the current variable
                         */
                        if(dir=='right')
                            ++current;
                        else if(dir=='left')
                            --current;
                    }).attr('src', $nextimage.attr('alt'));
                }

                /*
                resizes an image given the window size,
                considering the margin values
                 */
                function resize($image){
                    var windowH      = $(window).height()-100;
                    var windowW      = $(window).width()-80;
                    var theImage     = new Image();
                    theImage.src     = $image.attr("src");
                    var imgwidth     = theImage.width;
                    var imgheight    = theImage.height;

                    if((imgwidth > windowW)||(imgheight > windowH)){
                        if(imgwidth > imgheight){
                            var newwidth = windowW;
                            var ratio = imgwidth / windowW;
                            var newheight = imgheight / ratio;
                            theImage.height = newheight;
                            theImage.width= newwidth;
                            if(newheight>windowH){
                                var newnewheight = windowH;
                                var newratio = newheight/windowH;
                                var newnewwidth =newwidth/newratio;
                                theImage.width = newnewwidth;
                                theImage.height= newnewheight;
                            }
                        }
                        else{
                            var newheight = windowH;
                            var ratio = imgheight / windowH;
                            var newwidth = imgwidth / ratio;
                            theImage.height = newheight;
                            theImage.width= newwidth;
                            if(newwidth>windowW){
                                var newnewwidth = windowW;
                                var newratio = newwidth/windowW;
                                var newnewheight =newheight/newratio;
                                theImage.height = newnewheight;
                                theImage.width= newnewwidth;
                            }
                        }
                    }
                    $image.css({'width':theImage.width+'px','height':theImage.height+'px'});
                }
            });
        </script>
    </body>
</html>